#
# Add static MAC reservation for controller-1 and controller-2
#

apiVersion: kuttl.dev/v1beta1
kind: TestStep
commands:
  - command: |
      oc patch -n openstack osnetcfg openstacknetconfig --type='json' -p='[{"op": "add", "path": "/spec/ovnBridgeMacMappings/staticReservations/controller-1/reservations", "value": {"datacentre": "fa:16:3a:aa:aa:bb"}}]'
    namespaced: true
  - command: |
      # add new empty reservation
      oc patch -n openstack osnetcfg openstacknetconfig --type='json' -p='[{"op": "add", "path": "/spec/ovnBridgeMacMappings/staticReservations/controller-2", "value": {"reservations":{}}}]'
    namespaced: true
  - command: |
      oc patch -n openstack osnetcfg openstacknetconfig --type='json' -p='[{"op": "add", "path": "/spec/ovnBridgeMacMappings/staticReservations/controller-2/reservations", "value": {"datacentre": "fa:16:3a:aa:aa:cc"}}]'
    namespaced: true
