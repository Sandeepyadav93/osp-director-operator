#
# Check for:
#
# - 1 OpenStackBaremetalSet
# - 1 OpenStackProvisionServer
# - 1 OpenStackMACAddress
#

apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackBaremetalSet
metadata:
  finalizers:
  - baremetalset.osp-director.openstack.org-compute
  name: compute
  namespace: openstack
spec:
  baseImageUrl: http://192.168.111.1/images/rhel-guest-image-8.4-992.x86_64.qcow2
  count: 0
  ctlplaneInterface: enp7s0
  deploymentSSHSecret: osp-controlplane-ssh-keys
  networks:
  - ctlplane
  - internal_api
  - tenant
  passwordSecret: userpassword
  roleName: Compute
status:
  conditions:
  - message: OpenStackBaremetalSet compute OpenStackProvisionServer local image URL not yet available, requeuing and waiting 30 seconds                                                                                                                    
    reason: Waiting
    status: "False"
    type: OpenStackProvisionServerNotReady
  - message: No BaremetalHost have been requested
    reason: BaremetalHostCountZero
    status: "True"
    type: Empty
  provisioningStatus:
    reason: No BaremetalHost have been requested
    state: Empty
---
apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackProvisionServer
metadata:
  name: compute-provisionserver
  namespace: openstack
spec:
  apacheImageUrl: registry.redhat.io/rhel8/httpd-24@sha256:87d58041da70f094e685511f86f8a83e9b2a67424fcf8cf2530ff071f566350b
  baseImageUrl: http://192.168.111.1/images/rhel-guest-image-8.4-992.x86_64.qcow2
  downloaderImageUrl: registry.redhat.io/rhosp-rhel8-tech-preview/osp-director-downloader@sha256:dadca151e8712eef8b206b69722c558b2aac035a4a3c52e705bf69c26d649567
  port: 6190
  provisioningAgentImageUrl: registry.redhat.io/rhosp-rhel8-tech-preview/osp-director-provisioner@sha256:77eab3a61ef569236a17575d5e4f1318d2ac13f164af8a2c94b732a4c50af579
status:
  conditions:
  - message: ProvisionServer compute-provisionserver has been provisioned
    reason: ProvisionServer compute-provisionserver has been provisioned
    status: "True"
    type: Provisioned
  provisioningStatus:
    reason: ProvisionServer compute-provisionserver has been provisioned
    state: Provisioned
---
apiVersion: osp-director.openstack.org/v1beta1
kind: OpenStackMACAddress
metadata:
  finalizers:
  - openstackmacaddress.osp-director.openstack.org
  name: openstacknetconfig
  namespace: openstack
spec:
  physNetworks:
  - macPrefix: fa:16:3a
    name: datacentre
  - macPrefix: fa:16:3b
    name: datacentre2
  roleReservations:
    Compute:
      reservations: {}
    Controller:
      reservations: {}
status:
  conditions:
  - message: All MAC addresses created
    reason: MACAddressesCreated
    status: "True"
    type: Created
  currentState: Created
  macReservations: {}
  reservedMACCount: 0
